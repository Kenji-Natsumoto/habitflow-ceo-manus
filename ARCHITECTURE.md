# HabitFlow for CEO - プログラム構成ガイド

このドキュメントでは、エンジニアでない方にもわかりやすく、アプリの構成と各ファイルの役割を説明します。

---

## 全体像：アプリの「設計図」

このアプリは**React Native + Expo**という技術で作られています。1つのコードから、iPhone（iOS）とAndroidの両方で動くアプリを作れる仕組みです。

```
habitflow-ceo/
├── app/                    ← 📱 画面（ユーザーが見る部分）
├── components/             ← 🧩 部品（ボタンやカードなど再利用するパーツ）
├── lib/                    ← 🧠 頭脳（データ処理やロジック）
├── assets/                 ← 🎨 素材（アイコン画像など）
├── hooks/                  ← 🔧 便利機能（色やテーマの取得など）
├── constants/              ← 📋 設定値（色の定義など）
├── server/                 ← 🖥️ サーバー（将来のクラウド機能用）
└── 設定ファイル群           ← ⚙️ アプリの動作設定
```

---

## 1. 画面ファイル（app/フォルダ）

ユーザーが実際に見て操作する画面です。

| ファイル | 役割 | 特徴・留意点 |
|---------|------|-------------|
| `app/(tabs)/index.tsx` | **Today画面**（メイン画面） | 今日の習慣一覧を表示。タップでチェック。進捗リングで達成率を視覚化 |
| `app/(tabs)/stats.tsx` | **Stats画面**（統計） | 週間ヒートマップ、連続達成日数、カテゴリ別達成率を表示 |
| `app/(tabs)/settings.tsx` | **Settings画面**（設定） | ダークモード切替、プレミアム案内、アプリ情報 |
| `app/(tabs)/_layout.tsx` | **タブバー設定** | 画面下部の3つのタブ（Today/Stats/Settings）の構成を定義 |
| `app/_layout.tsx` | **アプリ全体の土台** | テーマ設定、データ管理の初期化など、アプリ起動時の準備 |

**留意点：** タブ画面は `(tabs)` フォルダにまとめることで、自動的にタブナビゲーションが構成されます。

---

## 2. 部品ファイル（components/フォルダ）

画面を構成する「部品」です。レゴブロックのように組み合わせて画面を作ります。

| ファイル | 役割 | 特徴・留意点 |
|---------|------|-------------|
| `habit-item.tsx` | **習慣カード** | 1つの習慣を表示するカード。タップでチェック、アイコン・名前・説明を表示 |
| `progress-ring.tsx` | **進捗リング** | 円形の達成率表示。SVGで描画し、%に応じてリングが埋まる |
| `screen-container.tsx` | **画面の枠** | iPhoneのノッチ（切り欠き）を避けて安全に表示するための枠 |
| `haptic-tab.tsx` | **タブボタン** | タップ時に振動フィードバックを与えるタブボタン |
| `ui/icon-symbol.tsx` | **アイコン定義** | タブバーで使うアイコンの対応表 |

**留意点：** 部品を分けることで、同じデザインを複数の場所で使い回せます。

---

## 3. 頭脳ファイル（lib/フォルダ）

データの処理や計算を行う「頭脳」部分です。

| ファイル | 役割 | 特徴・留意点 |
|---------|------|-------------|
| `habits.ts` | **習慣データの定義** | 12個のデフォルト習慣、日付計算、達成率計算、ストリーク計算のロジック |
| `habit-context.tsx` | **データの共有** | アプリ全体で習慣データを共有する仕組み。どの画面からでも同じデータにアクセス可能 |
| `theme-provider.tsx` | **テーマ管理** | ダークモード/ライトモードの切り替えを管理 |
| `habits.test.ts` | **テストコード** | 習慣機能が正しく動くか自動チェックするコード |

**留意点：** `habit-context.tsx` が「データの司令塔」です。チェック状態の変更はここを通じて全画面に反映されます。

---

## 4. デフォルト習慣の構成（lib/habits.ts内）

経営者向けに厳選した12個の習慣が定義されています。

### 自己啓発（Mind）カテゴリ - 6項目
| ID | 習慣名 | 説明 |
|----|--------|------|
| reading | 読書30分 | ビジネス書・自己啓発書を30分読む |
| meditation | 瞑想10分 | マインドフルネス瞑想で集中力向上 |
| exercise | 運動 | ジョギング、ジム、ストレッチなど |
| learning | 学習 | 新しいスキルの習得、オンライン講座 |
| gratitude | 感謝日記 | 3つの感謝を書き出す |
| early-rise | 早起き | 6時前に起床 |

### 実務（Business）カテゴリ - 6項目
| ID | 習慣名 | 説明 |
|----|--------|------|
| sales-check | 売上確認 | 日次の売上・KPI確認 |
| team-1on1 | チーム1on1 | メンバーとの対話時間確保 |
| strategy | 戦略思考 | 30分の戦略・計画立案時間 |
| customer | 顧客対応 | 顧客との直接コミュニケーション |
| task-review | タスク整理 | 優先順位の見直しとタスク整理 |
| reflection | 振り返り | 1日の振り返りと改善点の記録 |

---

## 5. データの保存方法

| 項目 | 保存場所 | 説明 |
|------|---------|------|
| 習慣のチェック状態 | スマホ内部（AsyncStorage） | アプリを閉じても保持される |
| 過去の達成履歴 | スマホ内部（AsyncStorage） | 日付ごとに完了した習慣IDを記録 |
| 連続達成日数 | 計算で算出 | 履歴から毎回計算（50%以上達成で1日カウント） |

**留意点：** 現在はスマホ内にのみ保存されるため、機種変更時にデータは引き継がれません。クラウド同期は将来のプレミアム機能として検討中です。

---

## 6. デザイン設定ファイル

| ファイル | 役割 |
|---------|------|
| `theme.config.js` | 色の定義（ダーク/ライト両方） |
| `tailwind.config.js` | スタイル設定（余白、角丸など） |
| `app.config.ts` | アプリ名、アイコン、バンドルIDなど |

**カラーパレット（ダークモード）：**
- 背景色: `#0F0F14`（深い黒）
- メインカラー: `#818CF8`（インディゴ紫）
- 成功色: `#34D399`（緑）
- 警告色: `#FBBF24`（オレンジ）

---

## 7. 開発時に留意した点

### ユーザー体験（UX）
- **片手操作を前提**：タップしやすい大きなボタン、親指が届く位置に重要な操作を配置
- **即時フィードバック**：チェック時に振動（ハプティクス）と視覚的変化で「押した感」を演出
- **ダークモードデフォルト**：経営者の夜間利用を想定し、目に優しいダークテーマを標準に

### パフォーマンス
- **ローカル保存優先**：サーバー通信なしで即座に動作
- **軽量設計**：必要最小限の機能に絞り、アプリサイズを抑制

### 拡張性
- **部品の分離**：将来の機能追加がしやすい構造
- **テストコード完備**：機能変更時に既存機能が壊れていないか自動確認可能

---

## 8. ファイル階層の全体図

```
habitflow-ceo/
│
├── app/                           # 📱 画面
│   ├── _layout.tsx               # アプリ全体の土台
│   └── (tabs)/                   # タブ画面グループ
│       ├── _layout.tsx           # タブバーの設定
│       ├── index.tsx             # Today画面（メイン）
│       ├── stats.tsx             # Stats画面（統計）
│       └── settings.tsx          # Settings画面（設定）
│
├── components/                    # 🧩 再利用部品
│   ├── habit-item.tsx            # 習慣カード
│   ├── progress-ring.tsx         # 進捗リング
│   ├── screen-container.tsx      # 画面の安全枠
│   └── ui/
│       └── icon-symbol.tsx       # アイコン定義
│
├── lib/                           # 🧠 ロジック・データ処理
│   ├── habits.ts                 # 習慣データ・計算ロジック
│   ├── habit-context.tsx         # データ共有の仕組み
│   ├── theme-provider.tsx        # テーマ管理
│   └── habits.test.ts            # テストコード
│
├── assets/images/                 # 🎨 画像素材
│   ├── icon.png                  # アプリアイコン
│   ├── splash-icon.png           # 起動画面アイコン
│   └── favicon.png               # Webアイコン
│
├── hooks/                         # 🔧 便利機能
│   └── use-colors.ts             # 現在のテーマ色を取得
│
├── theme.config.js                # ⚙️ 色の定義
├── app.config.ts                  # ⚙️ アプリ設定
├── design.md                      # 📄 デザイン設計書
└── todo.md                        # 📄 開発タスク管理
```

---

このドキュメントは `/home/ubuntu/habitflow-ceo/ARCHITECTURE.md` に保存されています。
